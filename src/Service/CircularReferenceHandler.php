<?php

namespace App\Service;

/**
 * Так как в приложение происходит сирреализация обхектов в JSON, а объекты имеют двунаправленные зависимости,
 * то необходимо остановить рекурсия. С помощью этого сервиса по достижению максимального кол-ва "погружений"
 * мы заприщаем дальнейшую сериализацию и возвращаем id.
 */
class CircularReferenceHandler
{
    public function __invoke($object)
    {
        return $object->getId();
    }
}
